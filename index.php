<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pharmacie - Connexion</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAwIDIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNNjAgMjAgTDE0MCAyMCBMMTQwIDYwIEwxODAgNjAgTDE4MCAxNDAgTDE0MCAxNDAgTDE0MCAxODAgTDYwIDE4MCBMNTAG0xNDAgTDIwIDE0MCBMMJAG0NjAgTDYwIDYwIFoiIGZpbGw9IiMyMkM1NUUiLz4KICA8cGF0aCBkPSJNNzUgMzUgTDEyNSAzNSBMMTI1IDc1IEwxNjUgNzUgTDE2NSAxMjUgTDEyNSAxMjUgTDEyNSAxNjUgTDc1IDE2NSBMNTAY0xMjUgTDM1IDEyNSBMMzUgNzUgTDc1IDc1IFoiIGZpbGw9IndoaXRlIi8+CiAgPGcgZmlsbD0iIzIyQzU1RSI+CiAgICA8cmVjdCB4PSI5NyIgeT0iNTAiIHdpZHRoPSI2IiBoZWlnaHQ9IjEwMCIvPgogICAgPHBhdGggZD0iTTg1IDcwIFE3NSA3NSA4NSA4NSBRMTETY0NOM5NRCXM0QTEI4MCA3MCAXMW0ZhOVcQgQPNXUgODBZRAMTAwIDkwURA2pUMTAlMjUgMTA1IDFYGNQMRUSMTI1IDkwIDEyMCAxFDwgUTEx1IDExMCAxMDUgMTA1IFE5NSAxGMDBRICWMVMA=ICQRA2pMA0VMA9NEQR23cWENIDUgcTRWOTU2MTAgMYc21O0ZRDUVMGA1UQVEgMG11MC3U0aTE0FIFQ5NSAwMFM5IDEwM0UBMRJVDSgEgRAPNIgWRGQCAxTFcQg2mNSAwMWU05IDUCZUEgMa24gBG9SgBGMTaAy5BIUA2pUN0RBRTA1GW5G05IDz1jUQl5IDYgMTMwO0gUGMEJzNIAQNIIQ2NUzXUEgkBXM9TYgB3cSBGOTU2YH0gQVMUR0gERE2QYQcXQQ=="/+gCGAYYCQEIGYGEI8UWUCgDY3cgKYE4CAg0JnJ4IE4nIDUgcj0iOCIgcnk9IjUNICU+CiAgPC9nPgogIDxwYXRoIGQ9Ik05RCBMRMHRC0cXU0MSRE0T0SMRU4UTM5MCBMMHJcSAg2zSUgRiA0NDQ5IGdWlHAEYNIHYGYcSgBGQmNOAEg5MCAMI2NUMRKEgXJVMA0PNOYmNCcQo9IjQ1LEcXQYgQCKzAcNOgGAg5MCBSAwMQYQEIGYNUYgXAg9ACJOBEGJa9G2 JEcTOW3F5MRCAJMA40JQg6PSI5PCBRIQ4gZIVSIG9SGFNXFFgRUAUGRQhYFc6NEw0N0QmBASQ4XQVbKCGY0MSAxaAIMKCYYURgNNCQQUAOJaAgagVOEgcBSA9cRRAMAIBMQg02STgEAYFXNABNNMHA0AH1QgYFUMCAsH0wCCIOFZ0AGQC04NAG0MG5QNGHEQGENaGAIGhBSQU5CrETVQVNYGE9BgcRNBFOMAYBHQAwU5JQ0OOJVCAGXQ4o0YgVNQg9QYyAQEQUQOAHaGUGRaAA4CKGXRA4GHlWS6mNMYGCZRQAZ8VE2mQGAZB0AXNA50OQBFR0QAYG0GGCmQAWAmN2FCEYWRN0AMYQVNQERWFNQAYyPUOJQAFUEQVAGCAgFc6YVUKiGUBAgFEhRQIYAD1gCmgB0YQgU4N9GMgVRaF1Q9z1N0g0sGNAgA4GGQVdXvMgFWYAdYXBMVGAI&5A3QgYGKQVGW2FQhUGYgFMUYPmGIMQAUmYUxGGAJlQVUQd1A1GGNICrFBGYWOtmCA05AGxVNXVCF5Q32FVGwUZRQVCQBFhF1BAQRGAGMAgAsAnBCgOYzaAAKYg3q9EY&" fill="#22C55E"/>
  </g>
  <path d="M90 140 L110 140 Q115 140 115 145 L115 155 Q115 160 110 160 L90 160 Q85 160 85 155 L85 145 Q85 140 90 140 Z" fill="#22C55E"/>
</svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: #f3f4f6;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .card {
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            width: 100%;
            max-width: 28rem;
            overflow: hidden;
        }

        .card-header {
            padding: 1.5rem 1.5rem 0;
            text-align: center;
        }

        .logo-container {
            display: flex;
            justify-content: center;
            margin-bottom: 1rem;
        }

        .pharmacy-logo {
            width: 5rem;
            height: 5rem;
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #111827;
            margin-bottom: 0.5rem;
        }

        .card-description {
            color: #6b7280;
            font-size: 0.875rem;
            margin-bottom: 1.5rem;
        }

        .card-content {
            padding: 1.5rem;
        }

        .form-group {
            margin-bottom: 1rem;
            position: relative;
        }

        .label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
            margin-bottom: 0.5rem;
        }

        .input {
            width: 100%;
            padding: 0.5rem 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }

        .input:focus {
            outline: none;
            border-color: #22c55e;
            box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.1);
        }

        .input::placeholder {
            color: #9ca3af;
        }

        .password-input {
            padding-right: 3rem;
        }

        .toggle-password {
            position: absolute;
            right: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            color: #6b7280;
            padding: 0.25rem;
            border-radius: 0.25rem;
            transition: color 0.15s ease-in-out;
        }

        .toggle-password:hover {
            color: #374151;
        }

        .toggle-password:focus {
            outline: none;
            color: #22c55e;
        }

        .toggle-icon {
            width: 1.25rem;
            height: 1.25rem;
        }

        .error {
            color: #ef4444;
            font-size: 0.875rem;
            margin-top: 0.5rem;
        }

        .session-error {
            background-color: #fef2f2;
            border: 1px solid #fecaca;
            color: #dc2626;
            padding: 0.75rem;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .error-icon {
            width: 1.25rem;
            height: 1.25rem;
            flex-shrink: 0;
        }

        .button {
            width: 100%;
            background-color: #22c55e;
            color: white;
            border: none;
            border-radius: 0.375rem;
            padding: 0.625rem 1rem;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.15s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .button:hover {
            background-color: #16a34a;
        }

        .button:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.3);
        }

        .login-icon {
            width: 1rem;
            height: 1rem;
        }

        .hidden {
            display: none;
        }

        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="card">
        <div class="card-header">
            <div class="logo-container">
                <svg viewBox="0 0 200 200" class="pharmacy-logo" xmlns="http://www.w3.org/2000/svg">
                    <!-- Green Cross Background -->
                    <path d="M60 20 L140 20 L140 60 L180 60 L180 140 L140 140 L140 180 L60 180 L60 140 L20 140 L20 60 L60 60 Z" fill="#22C55E"/>
                    
                    <!-- White Inner Cross -->
                    <path d="M75 35 L125 35 L125 75 L165 75 L165 125 L125 125 L125 165 L75 165 L75 125 L35 125 L35 75 L75 75 Z" fill="white"/>
                    
                    <!-- Rod of Asclepius -->
                    <g fill="#22C55E">
                        <!-- Staff -->
                        <rect x="97" y="50" width="6" height="100"/>
                        
                        <!-- Snake body -->
                        <path d="M85 70 Q75 75 85 85 Q110 95 115 80 Q120 70 105 75 Q95 80 100 90 Q105 100 115 95 Q125 90 120 100 Q115 110 105 105 Q95 100 100 110 Q105 120 115 125 Q125 130 115 135 L105 140 Q95 135 105 130 Q115 125 110 120 Q105 115 95 120 Q85 125 90 115 Q95 105 105 110 Q115 115 110 105 Q105 95 95 100 Q85 105 90 95 Q95 85 105 90 Q115 95 110 85 Q105 75 95 80 Q85 85 90 75 Z"/>
                        
                        <!-- Snake head -->
                        <ellipse cx="85" cy="72" rx="8" ry="5"/>
                    </g>
                    
                    <!-- Cup/Bowl at bottom -->
                    <path d="M90 140 L110 140 Q115 140 115 145 L115 155 Q115 160 110 160 L90 160 Q85 160 85 155 L85 145 Q85 140 90 140 Z" fill="#22C55E"/>
                </svg>
            </div>
            <h1 class="card-title">Connexion</h1>
            <p class="card-description">Entrez vos identifiants pour accéder au système</p>
        </div>
        
        <div class="card-content">
            <!-- Session Error Display -->
            <div id="sessionError" class="session-error hidden">
                <svg class="error-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                </svg>
                <span id="sessionErrorText"></span>
            </div>

            <form id="loginForm" method="post" action="config/routeur.php">
                <div class="form-group">
                    <label for="username" class="label">Nom d'utilisateur</label>
                    <input 
                        type="text" 
                        id="username" 
                        name="username"
                        class="input" 
                        placeholder="Claude" 
                        required
                    />
                </div>
                
                <div class="form-group">
                    <label for="password" class="label">Mot de passe</label>
                    <div style="position: relative;">
                        <input 
                            type="password" 
                            id="password" 
                            name="password"
                            class="input password-input" 
                            placeholder="test@2025" 
                            required
                        />
                        <button 
                            type="button" 
                            class="toggle-password" 
                            onclick="togglePassword()"
                            aria-label="Afficher/Masquer le mot de passe"
                        >
                            <svg id="eyeIcon" class="toggle-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                            </svg>
                            <svg id="eyeOffIcon" class="toggle-icon hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"/>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <div id="error" class="error hidden"></div>
                
                <button type="submit" class="button">
                    <svg class="login-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"/>
                    </svg>
                    Se connecter
                </button>
            </form>
        </div>
    </div>

    <script>
        // Function to toggle password visibility
        function togglePassword() {
            const passwordInput = document.getElementById('password');
            const eyeIcon = document.getElementById('eyeIcon');
            const eyeOffIcon = document.getElementById('eyeOffIcon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                eyeIcon.classList.add('hidden');
                eyeOffIcon.classList.remove('hidden');
            } else {
                passwordInput.type = 'password';
                eyeIcon.classList.remove('hidden');
                eyeOffIcon.classList.add('hidden');
            }
        }

        // Function to display session error
        function showSessionError(message) {
            const errorDiv = document.getElementById('sessionError');
            const errorText = document.getElementById('sessionErrorText');
            
            errorText.textContent = message;
            errorDiv.classList.remove('hidden');
            errorDiv.classList.add('fade-in');
        }

        // Function to hide session error
        function hideSessionError() {
            const errorDiv = document.getElementById('sessionError');
            errorDiv.classList.add('hidden');
            errorDiv.classList.remove('fade-in');
        }

        // Check for session errors on page load (PHP integration)
        document.addEventListener('DOMContentLoaded', function() {
            // This would typically be populated by PHP
            const urlParams = new URLSearchParams(window.location.search);
            const error = urlParams.get('error');
            
            if (error) {
                let errorMessage = '';
                switch (error) {
                    case 'invalid_credentials':
                        errorMessage = 'Nom d\'utilisateur ou mot de passe incorrect.';
                        break;
                    case 'session_expired':
                        errorMessage = 'Votre session a expiré. Veuillez vous reconnecter.';
                        break;
                    case 'access_denied':
                        errorMessage = 'Accès refusé. Vous n\'avez pas les permissions nécessaires.';
                        break;
                    case 'account_locked':
                        errorMessage = 'Votre compte a été temporairement verrouillé.';
                        break;
                    default:
                        errorMessage = 'Une erreur s\'est produite. Veuillez réessayer.';
                }
                showSessionError(errorMessage);
            }

            // Example: Show session error programmatically (for demonstration)
            // Uncomment the line below to test the error display
            // setTimeout(() => showSessionError('Exemple d\'erreur de session'), 1000);
        });

        // Add some interactive feedback
        const inputs = document.querySelectorAll('.input');
        inputs.forEach(input => {
            input.addEventListener('focus', function() {
                this.style.borderColor = '#22c55e';
                // Hide session error when user starts typing
                if (this.value.length === 0) {
                    hideSessionError();
                }
            });
            
            input.addEventListener('blur', function() {
                if (!this.value) {
                    this.style.borderColor = '#d1d5db';
                }
            });

            input.addEventListener('input', function() {
                // Hide errors when user starts typing
                hideSessionError();
                const errorDiv = document.getElementById('error');
                errorDiv.classList.add('hidden');
            });
        });

        // Form validation
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value;
            const errorDiv = document.getElementById('error');

            // Clear previous errors
            errorDiv.classList.add('hidden');
            hideSessionError();

            // Basic validation
            if (!username || !password) {
                e.preventDefault();
                errorDiv.textContent = 'Veuillez remplir tous les champs.';
                errorDiv.classList.remove('hidden');
                return;
            }

            if (username.length < 3) {
                e.preventDefault();
                errorDiv.textContent = 'Le nom d\'utilisateur doit contenir au moins 3 caractères.';
                errorDiv.classList.remove('hidden');
                return;
            }

          
        });

        // Keyboard shortcut for password toggle
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'h') {
                e.preventDefault();
                togglePassword();
            }
        });
    </script>
</body>
</html>